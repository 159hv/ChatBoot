<html lang="zh-CN">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   局域网聊天室
  </title>
  <script src="https://res.gemcoder.com/js/reload.js">
  </script>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <script>
   tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#A7C7E7',
        // 婴儿蓝
        secondary: '#F5F5DC',
        // 浅米色
        accent: '#FFDAB9',
        // 浅橙色
        dark: '#4A4A4A',
        // 深灰色文字
        light: '#F9F9F9',
        // 浅色背景
        success: '#90EE90',
        // 成功绿色
        warning: '#FFA500',
        // 警告橙色
        danger: '#FF6347' // 危险红色
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif']
      },
      spacing: {
        '18': '4.5rem',
        '22': '5.5rem',
        '26': '6.5rem',
        '30': '7.5rem'
      },
      boxShadow: {
        'soft': '0 4px 20px rgba(0, 0, 0, 0.05)',
        'hover': '0 8px 30px rgba(0, 0, 0, 0.12)'
      }
    }
  }
};
  </script>
  <style type="text/tailwindcss">
   @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .bg-wave {
                background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23A7C7E7' fill-opacity='0.1' d='M0,192L48,181.3C96,171,192,149,288,149.3C384,149,480,171,576,181.3C672,192,768,192,864,181.3C960,171,1056,149,1152,133.3C1248,117,1344,107,1392,101.3L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
                background-repeat: no-repeat;
                background-position: bottom;
                background-size: cover;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .transition-all-300 {
                transition: all 0.3s ease;
            }
        }
  </style>
 </head>
 <body class="bg-secondary bg-wave min-h-screen font-sans text-dark overflow-hidden flex flex-col">
  <!-- [MODULE] a1b_主内容区域 -->
  <div class="flex flex-col md:flex-row h-screen">
   <!-- [MODULE] c3d_侧边栏 -->
   <aside class="w-full md:w-64 bg-white shadow-soft z-10 flex flex-col transition-all duration-300 ease-in-out" id="sidebar">
    <!-- [MODULE] e5f_侧边栏:顶部区域 -->
    <div class="p-4 border-b border-gray-100 flex items-center justify-between">
     <div class="flex items-center space-x-3">
      <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white">
       <i class="fas fa-comments text-xl">
       </i>
      </div>
      <h1 class="text-xl font-bold text-dark">
       局域网聊天室
      </h1>
     </div>
     <button class="md:hidden text-gray-500 hover:text-primary transition-colors" id="toggle-sidebar">
      <i class="fas fa-chevron-left">
      </i>
     </button>
    </div>
    <!-- [/MODULE] e5f_侧边栏:顶部区域 -- 包含聊天室标题和移动端侧边栏切换按钮 -->
    <!-- [MODULE] g7h_侧边栏:搜索框 -->
    <div class="p-3 border-b border-gray-100">
     <div class="relative">
      <input class="w-full py-2 pl-10 pr-4 rounded-full bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary/30 transition-all" placeholder="搜索联系人..." type="text"/>
      <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
      </i>
     </div>
    </div>
    <!-- [/MODULE] g7h_侧边栏:搜索框 -- 用于搜索聊天联系人 -->
    <!-- [MODULE] i9j_侧边栏:菜单 -->
    <div class="flex border-b border-gray-100">
     <button class="flex-1 py-3 text-primary border-b-2 border-primary font-medium">
      <i class="fas fa-comment-alt mr-2">
      </i>
      聊天
     </button>
     <button class="flex-1 py-3 text-gray-500 hover:text-primary transition-colors">
      <i class="fas fa-user-friends mr-2">
      </i>
      联系人
     </button>
     <button class="flex-1 py-3 text-gray-500 hover:text-primary transition-colors">
      <i class="fas fa-phone-alt mr-2">
      </i>
      通话
     </button>
    </div>
    <!-- [/MODULE] i9j_侧边栏:菜单 -- 包含聊天、联系人、通话三个菜单选项 -->
    <!-- [MODULE] k0l_侧边栏:聊天列表 -->
    <div class="flex-1 overflow-y-auto scrollbar-hide">
     <!-- 活跃聊天 -->
     <div class="p-2">
      <h3 class="text-xs uppercase text-gray-400 font-semibold px-3 mb-2">
       活跃聊天
      </h3>
      <!-- 聊天项1 - 当前选中 -->
      <div class="chat-item selected flex items-center p-3 rounded-lg bg-primary/10 cursor-pointer transition-all-300 hover:bg-primary/20" data-chat-id="chat-1">
       <div class="relative">
        <img alt="张三" class="w-12 h-12 rounded-full object-cover border-2 border-primary" src="./api/searchImage?query=young man avatar with friendly smile, soft lighting, white background, minimal style&amp;width=50&amp;height=50"/>
        <span class="absolute bottom-0 right-0 w-4 h-4 bg-success rounded-full border-2 border-white">
        </span>
       </div>
       <div class="ml-3 flex-1 min-w-0">
        <div class="flex justify-between items-center">
         <h4 class="font-medium text-dark truncate">
          张三
         </h4>
         <span class="text-xs text-gray-500">
          10:23
         </span>
        </div>
        <div class="flex items-center mt-1">
         <p class="text-sm text-gray-700 truncate max-w-[160px]">
          好的，我马上就到！
         </p>
         <span class="ml-2 w-5 h-5 rounded-full bg-primary text-white text-xs flex items-center justify-center">
          2
         </span>
        </div>
       </div>
      </div>
      <!-- 聊天项2 -->
      <div class="chat-item flex items-center p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-all-300" data-chat-id="chat-2">
       <div class="relative">
        <img alt="李四" class="w-12 h-12 rounded-full object-cover" src="./api/searchImage?query=young woman avatar with smiling face, soft makeup, white background, professional photography&amp;width=50&amp;height=50"/>
        <span class="absolute bottom-0 right-0 w-4 h-4 bg-success rounded-full border-2 border-white">
        </span>
       </div>
       <div class="ml-3 flex-1 min-w-0">
        <div class="flex justify-between items-center">
         <h4 class="font-medium text-dark truncate">
          李四
         </h4>
         <span class="text-xs text-gray-500">
          昨天
         </span>
        </div>
        <div class="flex items-center mt-1">
         <p class="text-sm text-gray-500 truncate max-w-[160px]">
          我们明天开会讨论一下项目进度
         </p>
        </div>
       </div>
      </div>
      <!-- 聊天项3 -->
      <div class="chat-item flex items-center p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-all-300" data-chat-id="chat-3">
       <div class="relative">
        <img alt="王五" class="w-12 h-12 rounded-full object-cover" src="./api/searchImage?query=middle-aged man avatar with serious expression, formal attire, white background, professional style&amp;width=50&amp;height=50"/>
        <span class="absolute bottom-0 right-0 w-4 h-4 bg-gray-300 rounded-full border-2 border-white">
        </span>
       </div>
       <div class="ml-3 flex-1 min-w-0">
        <div class="flex justify-between items-center">
         <h4 class="font-medium text-dark truncate">
          王五
         </h4>
         <span class="text-xs text-gray-500">
          昨天
         </span>
        </div>
        <div class="flex items-center mt-1">
         <p class="text-sm text-gray-500 truncate max-w-[160px]">
          文件已经发送，请查收
         </p>
        </div>
       </div>
      </div>
      <!-- 聊天项4 -->
      <div class="chat-item flex items-center p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-all-300" data-chat-id="chat-4">
       <div class="relative">
        <img alt="赵六" class="w-12 h-12 rounded-full object-cover" src="./api/searchImage?query=young woman avatar with glasses, friendly expression, casual style, white background&amp;width=50&amp;height=50"/>
        <span class="absolute bottom-0 right-0 w-4 h-4 bg-success rounded-full border-2 border-white">
        </span>
       </div>
       <div class="ml-3 flex-1 min-w-0">
        <div class="flex justify-between items-center">
         <h4 class="font-medium text-dark truncate">
          赵六
         </h4>
         <span class="text-xs text-gray-500">
          周三
         </span>
        </div>
        <div class="flex items-center mt-1">
         <p class="text-sm text-gray-500 truncate max-w-[160px]">
          周末一起去看电影吗？
         </p>
        </div>
       </div>
      </div>
     </div>
     <!-- 群聊 -->
     <div class="p-2">
      <h3 class="text-xs uppercase text-gray-400 font-semibold px-3 mb-2">
       群聊
      </h3>
      <!-- 群聊项1 -->
      <div class="chat-item flex items-center p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-all-300" data-chat-id="group-1">
       <div class="relative">
        <img alt="开发团队" class="w-12 h-12 rounded-full object-cover" src="./api/searchImage?query=team group icon, modern design, blue color scheme, white background, minimal style&amp;width=50&amp;height=50"/>
       </div>
       <div class="ml-3 flex-1 min-w-0">
        <div class="flex justify-between items-center">
         <h4 class="font-medium text-dark truncate">
          开发团队
         </h4>
         <span class="text-xs text-gray-500">
          今天
         </span>
        </div>
        <div class="flex items-center mt-1">
         <span class="text-xs font-medium text-primary mr-1">
          张三:
         </span>
         <p class="text-sm text-gray-500 truncate max-w-[120px]">
          项目进度更新...
         </p>
         <span class="ml-2 w-5 h-5 rounded-full bg-primary text-white text-xs flex items-center justify-center">
          5
         </span>
        </div>
       </div>
      </div>
      <!-- 群聊项2 -->
      <div class="chat-item flex items-center p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-all-300" data-chat-id="group-2">
       <div class="relative">
        <img alt="好友群" class="w-12 h-12 rounded-full object-cover" src="./api/searchImage?query=friends group icon, colorful design, social theme, white background, fun style&amp;width=50&amp;height=50"/>
       </div>
       <div class="ml-3 flex-1 min-w-0">
        <div class="flex justify-between items-center">
         <h4 class="font-medium text-dark truncate">
          好友群
         </h4>
         <span class="text-xs text-gray-500">
          周二
         </span>
        </div>
        <div class="flex items-center mt-1">
         <span class="text-xs font-medium text-warning mr-1">
          李四:
         </span>
         <p class="text-sm text-gray-500 truncate max-w-[120px]">
          周末聚会地点确定了...
         </p>
        </div>
       </div>
      </div>
     </div>
    </div>
    <!-- [/MODULE] k0l_侧边栏:聊天列表 -- 显示活跃聊天和群聊列表，每个聊天项包含头像、名称、时间、最后一条消息和未读消息数 -->
    <!-- [MODULE] m2n_侧边栏:底部用户信息 -->
    <div class="p-3 border-t border-gray-100">
     <div class="flex items-center">
      <img alt="我的头像" class="w-10 h-10 rounded-full object-cover" src="./api/searchImage?query=user avatar with neutral expression, simple style, white background, minimal design&amp;width=50&amp;height=50"/>
      <div class="ml-3 flex-1 min-w-0">
       <h4 class="font-medium text-dark truncate">
        我自己
       </h4>
       <p class="text-xs text-gray-500 truncate">
        在线
       </p>
      </div>
      <div class="flex space-x-3">
       <button class="text-gray-500 hover:text-primary transition-colors">
        <i class="fas fa-cog">
        </i>
       </button>
       <button class="text-gray-500 hover:text-danger transition-colors" id="logoutBtn">
        <i class="fas fa-sign-out-alt">
        </i>
       </button>
      </div>
     </div>
    </div>
    <!-- [/MODULE] m2n_侧边栏:底部用户信息 -- 包含当前用户头像、名称、状态和设置、添加按钮 -->
   </aside>
   <!-- [/MODULE] c3d_侧边栏 -- 显示聊天列表、联系人等功能区域 -->
   <!-- [MODULE] o4p_聊天主区域 -->
   <main class="flex-1 flex flex-col bg-light relative overflow-hidden">
    <!-- [MODULE] q6r_聊天主区域:顶部信息栏 -->
    <div class="h-16 border-b border-gray-100 bg-white flex items-center justify-between px-4 shadow-sm z-10">
     <div class="flex items-center">
      <button class="md:hidden mr-2 text-gray-500 hover:text-primary transition-colors" id="show-sidebar">
       <i class="fas fa-chevron-right">
       </i>
      </button>
      <div class="relative">
       <img alt="张三" class="w-10 h-10 rounded-full object-cover" src="./api/searchImage?query=young man avatar with friendly smile, soft lighting, white background, minimal style&amp;width=50&amp;height=50"/>
       <span class="absolute bottom-0 right-0 w-3 h-3 bg-success rounded-full border-2 border-white">
       </span>
      </div>
      <div class="ml-3 hidden sm:block">
       <h3 class="font-medium text-dark">
        张三
       </h3>
       <p class="text-xs text-gray-500">
        正在输入...
       </p>
      </div>
     </div>
     <div class="flex space-x-3">
      <button class="text-gray-500 hover:text-primary transition-colors">
       <i class="fas fa-search">
       </i>
      </button>
      <button class="text-gray-500 hover:text-primary transition-colors">
       <i class="fas fa-phone-alt">
       </i>
      </button>
      <button class="text-gray-500 hover:text-primary transition-colors">
       <i class="fas fa-video">
       </i>
      </button>
      <button class="text-gray-500 hover:text-primary transition-colors">
       <i class="fas fa-ellipsis-v">
       </i>
      </button>
     </div>
    </div>
    <!-- [/MODULE] q6r_聊天主区域:顶部信息栏 -- 包含当前聊天对象头像、名称、状态和搜索、电话、视频、更多按钮 -->
    <!-- [MODULE] s8t_聊天主区域:消息区域 -->
    <div class="flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide" id="message-container">
     <!-- 时间分割线 -->
     <div class="flex justify-center">
      <span class="px-3 py-1 bg-gray-200/50 text-xs rounded-full text-gray-500">
       今天 10:15
      </span>
     </div>
     <!-- 对方消息 -->
     <div class="flex items-end">
      <img alt="张三" class="w-8 h-8 rounded-full object-cover" src="./api/searchImage?query=young man avatar with friendly smile, soft lighting, white background, minimal style&amp;width=50&amp;height=50"/>
      <div class="ml-2 max-w-[70%]">
       <div class="bg-white rounded-t-lg rounded-br-lg shadow-soft p-3">
        <p class="text-sm">
         嗨，你好！最近怎么样？
        </p>
       </div>
       <span class="text-xs text-gray-400 ml-2 mt-1 block">
        10:15
       </span>
      </div>
     </div>
     <!-- 自己消息 -->
     <div class="flex items-end justify-end">
      <div class="mr-2 max-w-[70%]">
       <div class="bg-primary text-white rounded-t-lg rounded-bl-lg shadow-soft p-3">
        <p class="text-sm">
         挺好的，最近在忙一个新项目
        </p>
       </div>
       <span class="text-xs text-gray-400 mr-2 mt-1 block text-right">
        10:17
       </span>
      </div>
     </div>
     <!-- 对方消息 -->
     <div class="flex items-end">
      <img alt="张三" class="w-8 h-8 rounded-full object-cover" src="./api/searchImage?query=young man avatar with friendly smile, soft lighting, white background, minimal style&amp;width=50&amp;height=50"/>
      <div class="ml-2 max-w-[70%]">
       <div class="bg-white rounded-t-lg rounded-br-lg shadow-soft p-3">
        <p class="text-sm">
         哦？什么项目这么神秘？
        </p>
       </div>
       <span class="text-xs text-gray-400 ml-2 mt-1 block">
        10:18
       </span>
      </div>
     </div>
     <!-- 对方消息 -->
     <div class="flex items-end">
      <img alt="张三" class="w-8 h-8 rounded-full object-cover" src="./api/searchImage?query=young man avatar with friendly smile, soft lighting, white background, minimal style&amp;width=50&amp;height=50"/>
      <div class="ml-2 max-w-[70%]">
       <div class="bg-white rounded-t-lg rounded-br-lg shadow-soft p-3">
        <p class="text-sm">
         是关于前端界面设计的，我们正在开发一个新的聊天应用
        </p>
       </div>
       <span class="text-xs text-gray-400 ml-2 mt-1 block">
        10:19
       </span>
      </div>
     </div>
     <!-- 自己消息 -->
     <div class="flex items-end justify-end">
      <div class="mr-2 max-w-[70%]">
       <div class="bg-primary text-white rounded-t-lg rounded-bl-lg shadow-soft p-3">
        <p class="text-sm">
         听起来不错！需要帮忙吗？
        </p>
       </div>
       <span class="text-xs text-gray-400 mr-2 mt-1 block text-right">
        10:21
       </span>
      </div>
     </div>
     <!-- 对方消息 -->
     <div class="flex items-end">
      <img alt="张三" class="w-8 h-8 rounded-full object-cover" src="./api/searchImage?query=young man avatar with friendly smile, soft lighting, white background, minimal style&amp;width=50&amp;height=50"/>
      <div class="ml-2 max-w-[70%]">
       <div class="bg-white rounded-t-lg rounded-br-lg shadow-soft p-3">
        <p class="text-sm">
         好的，我马上就到！
        </p>
       </div>
       <span class="text-xs text-gray-400 ml-2 mt-1 block">
        10:23
       </span>
      </div>
     </div>
     <!-- 正在输入提示 -->
     <div class="flex items-end">
      <img alt="张三" class="w-8 h-8 rounded-full object-cover" src="./api/searchImage?query=young man avatar with friendly smile, soft lighting, white background, minimal style&amp;width=50&amp;height=50"/>
      <div class="ml-2">
       <div class="bg-white rounded-lg shadow-soft p-2">
        <div class="flex space-x-1">
         <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0ms">
         </div>
         <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 150ms">
         </div>
         <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 300ms">
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
    <!-- [/MODULE] s8t_聊天主区域:消息区域 -- 显示聊天消息，包含时间分割线、对方消息、自己消息和正在输入提示 -->
    <!-- [MODULE] u9v_聊天主区域:输入区域 -->
    <div class="p-3 border-t border-gray-100 bg-white">
     <div class="flex items-center mb-2 text-gray-500">
      <button class="p-2 hover:text-primary transition-colors">
       <i class="fas fa-smile">
       </i>
      </button>
      <button class="p-2 hover:text-primary transition-colors">
       <i class="fas fa-paperclip">
       </i>
      </button>
      <button class="p-2 hover:text-primary transition-colors">
       <i class="fas fa-image">
       </i>
      </button>
      <button class="p-2 hover:text-primary transition-colors">
       <i class="fas fa-microphone">
       </i>
      </button>
      <div class="flex-1">
      </div>
      <button class="p-2 hover:text-primary transition-colors">
       <i class="fas fa-ellipsis-h">
       </i>
      </button>
     </div>
     <div class="flex items-end">
      <textarea class="flex-1 border border-gray-200 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-primary/30 resize-none transition-all" id="message-input" placeholder="输入消息..." rows="2">
        </textarea>
      <button class="ml-3 bg-primary text-white rounded-full p-3 hover:bg-primary/90 transition-colors shadow-md hover:shadow-lg" id="send-message">
       <i class="fas fa-paper-plane">
       </i>
      </button>
     </div>
    </div>
    <!-- [/MODULE] u9v_聊天主区域:输入区域 -- 包含表情、附件、图片、麦克风等功能按钮和消息输入框、发送按钮 -->
   </main>
   <!-- [/MODULE] o4p_聊天主区域 -- 显示当前聊天的消息内容和输入区域 -->
  </div>
  <!-- [/MODULE] a1b_主内容区域 -- 包含侧边栏和聊天主区域 -->
  <!-- [MODULE] z9x_登录页面 -->
  <div id="loginPage" class="fixed inset-0 bg-secondary bg-wave flex items-center justify-center z-50">
    <div class="bg-white rounded-xl shadow-soft p-8 w-full max-w-md transform transition-all duration-300 hover:shadow-hover">
      <div class="text-center mb-8">
        <h2 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-dark text-shadow">局域网聊天室</h2>
        <p class="text-gray-500 mt-2">连接朋友，畅所欲言</p>
      </div>
      
      <form id="loginForm" class="space-y-6">
        <div>
          <label for="username" class="block text-sm font-medium text-gray-700 mb-1">昵称</label>
          <div class="relative">
            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
              <i class="fas fa-user"></i>
            </span>
            <input type="text" id="username" name="username" required
              class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none"
              placeholder="请输入您的昵称">
          </div>
        </div>
        
        <div>
          <label for="password" class="block text-sm font-medium text-gray-700 mb-1">密码</label>
          <div class="relative">
            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
              <i class="fas fa-lock"></i>
            </span>
            <input type="password" id="password" name="password" required
              class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none"
              placeholder="请输入密码">
          </div>
        </div>
        
        <div>
          <label for="server" class="block text-sm font-medium text-gray-700 mb-1">选择服务器</label>
          <div class="relative">
            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
              <i class="fas fa-server"></i>
            </span>
            <select id="server" name="server" required
              class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none appearance-none bg-white">
              <option value="" disabled selected>选择可用服务器</option>
              <option value="server1">主服务器 - 北京</option>
              <option value="server2">备用服务器 - 上海</option>
              <option value="server3">测试服务器 - 广州</option>
            </select>
            <span class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-500">
              <i class="fas fa-chevron-down"></i>
            </span>
          </div>
        </div>
        
        <button type="submit" 
          class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-4 rounded-lg transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-soft hover:shadow">
          <i class="fas fa-sign-in-alt mr-2"></i>登录聊天室
        </button>
      </form>
    </div>
  </div>
  <!-- [/MODULE] z9x_登录页面 -- 包含昵称输入框、密码输入框、服务器选择下拉框和登录按钮 -->
  <!-- [JSMOD] w1x_侧边栏交互 -->
  <script id="sidebar-script">
   document.addEventListener('DOMContentLoaded', function () {
  // 侧边栏切换
  var sidebar = document.getElementById('sidebar');
  var toggleSidebarBtn = document.getElementById('toggle-sidebar');
  var showSidebarBtn = document.getElementById('show-sidebar');
  toggleSidebarBtn.addEventListener('click', function () {
    sidebar.classList.add('translate-x-[-100%]');
  });
  showSidebarBtn.addEventListener('click', function () {
    sidebar.classList.remove('translate-x-[-100%]');
  });

  // 聊天项点击事件
  var chatItems = document.querySelectorAll('.chat-item');
  chatItems.forEach(function (item) {
    item.addEventListener('click', function () {
      // 移除其他选中状态
      chatItems.forEach(function (i) {
        return i.classList.remove('selected', 'bg-primary/10');
      });
      // 添加当前选中状态
      item.classList.add('selected', 'bg-primary/10');

      // 在移动设备上点击聊天后隐藏侧边栏
      if (window.innerWidth < 768) {
        sidebar.classList.add('translate-x-[-100%]');
      }
    });
  });
});
  </script>
  <!-- [/JSMOD] w1x_侧边栏交互 -- 处理侧边栏切换、聊天项选择等交互逻辑 -->
  <!-- [JSMOD] y2z_聊天功能 -->
  <script id="chat-script">
   document.addEventListener('DOMContentLoaded', function () {
  var messageInput = document.getElementById('message-input');
  var sendMessageBtn = document.getElementById('send-message');
  var messageContainer = document.getElementById('message-container');

  // 自动调整输入框高度
  messageInput.addEventListener('input', function () {
    messageInput.style.height = 'auto';
    var newHeight = Math.min(messageInput.scrollHeight, 120); // 最大高度限制
    messageInput.style.height = newHeight + 'px';
  });

  // 发送消息
  var sendMessage = function sendMessage() {
    var message = messageInput.value.trim();
    if (!message) return;

    // 创建新消息元素
    var now = new Date();
    var timeString = "".concat(now.getHours().toString().padStart(2, '0'), ":").concat(now.getMinutes().toString().padStart(2, '0'));
    var messageElement = document.createElement('div');
    messageElement.className = 'flex items-end justify-end';
    messageElement.innerHTML = "<div class=\"mr-2 max-w-[70%]\">\n                        <div class=\"bg-primary text-white rounded-t-lg rounded-bl-lg shadow-soft p-3\">\n                            <p class=\"text-sm\">".concat(message, "</p>\n                        </div>\n                        <span class=\"text-xs text-gray-400 mr-2 mt-1 block text-right\">").concat(timeString, "</span>\n                    </div>");

    // 移除正在输入提示（如果存在）
    var typingIndicator = messageContainer.querySelector('.animate-bounce').closest('div.flex.items-end');
    if (typingIndicator) {
      messageContainer.removeChild(typingIndicator);
    }

    // 添加新消息并滚动到底部
    messageContainer.appendChild(messageElement);
    messageContainer.scrollTop = messageContainer.scrollHeight;

    // 清空输入框并重置高度
    messageInput.value = '';
    messageInput.style.height = 'auto';

    // 模拟回复（仅演示用）
    setTimeout(function () {
      simulateReply();
    }, 1500);
  };

  // 发送按钮点击事件
  sendMessageBtn.addEventListener('click', sendMessage);

  // 回车键发送消息
  messageInput.addEventListener('keydown', function (e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  });

  // 模拟回复（仅演示用）
  var simulateReply = function simulateReply() {
    var replies = ["好的，我明白了。", "这个想法不错！", "我稍后给你回复。", "我们可以讨论一下细节。", "没问题，我会处理的。"];
    var randomReply = replies[Math.floor(Math.random() * replies.length)];
    var now = new Date();
    var timeString = "".concat(now.getHours().toString().padStart(2, '0'), ":").concat(now.getMinutes().toString().padStart(2, '0'));
    var replyElement = document.createElement('div');
    replyElement.className = 'flex items-end';
    replyElement.innerHTML = "<img src=\"https://design.gemcoder.com/staticResource/echoAiSystemImages/cbaeb1aeec0c0b9fea3a682e1b00f025.png\" alt=\"\u5F20\u4E09\" class=\"w-8 h-8 rounded-full object-cover\">\n                    <div class=\"ml-2 max-w-[70%]\">\n                        <div class=\"bg-white rounded-t-lg rounded-br-lg shadow-soft p-3\">\n                            <p class=\"text-sm\">".concat(randomReply, "</p>\n                        </div>\n                        <span class=\"text-xs text-gray-400 ml-2 mt-1 block\">").concat(timeString, "</span>\n                    </div>");
    messageContainer.appendChild(replyElement);
    messageContainer.scrollTop = messageContainer.scrollHeight;
  };
});
  </script>
  <!-- [/JSMOD] y2z_聊天功能 -- 处理消息输入、发送、接收等聊天功能逻辑 -->
  <!-- [JSMOD] a3b_响应式调整 -->
  <script id="responsive-script">
   document.addEventListener('DOMContentLoaded', function () {
  // 处理窗口大小变化
  var handleResize = function handleResize() {
    var sidebar = document.getElementById('sidebar');

    // 在大屏幕上确保侧边栏可见
    if (window.innerWidth >= 768) {
      sidebar.classList.remove('translate-x-[-100%]');
    }
  };

  // 初始调用一次
  handleResize();

  // 监听窗口大小变化
  window.addEventListener('resize', handleResize);
});
  </script>
  <!-- [/JSMOD] a3b_响应式调整 -- 处理窗口大小变化时的响应式布局调整 -->
 </body>
  <!-- [JSMOD] l2k_页面切换逻辑 -->
  <script id="pageSwitchScript">
    document.addEventListener('DOMContentLoaded', () => {
      // 获取页面元素
      const loginPage = document.getElementById('loginPage');
      const mainContent = document.getElementById('mainContent');
      const loginForm = document.getElementById('loginForm');
      const logoutBtn = document.getElementById('logoutBtn');
      
      // 检查登录状态，默认未登录
      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
      
      // 根据登录状态显示相应页面
      if (isLoggedIn) {
        loginPage.classList.add('hidden');
        mainContent.classList.remove('hidden');
      } else {
        loginPage.classList.remove('hidden');
        mainContent.classList.add('hidden');
      }
      
      // 登录表单提交事件
      loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const server = document.getElementById('server').value;
        
        // 简单验证
        if (username && password && server) {
          // 保存登录状态
          localStorage.setItem('isLoggedIn', 'true');
          localStorage.setItem('username', username);
          localStorage.setItem('server', server);
          
          // 更新用户信息显示
          document.querySelector('#sidebar .font-medium').textContent = username;
          
          // 切换到聊天页面
          loginPage.classList.add('hidden');
          mainContent.classList.remove('hidden');
        }
      });
      
      // 退出登录事件
      logoutBtn.addEventListener('click', () => {
        // 清除登录状态
        localStorage.removeItem('isLoggedIn');
        localStorage.removeItem('username');
        localStorage.removeItem('server');
        
        // 切换到登录页面
        loginPage.classList.remove('hidden');
        mainContent.classList.add('hidden');
        
        // 重置表单
        loginForm.reset();
      });
    });
  </script>
  <!-- [/JSMOD] l2k_页面切换逻辑 -- 处理登录表单提交、退出登录功能和页面切换逻辑 -->
</html>
